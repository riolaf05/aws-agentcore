{
  "agentName": "OrchestratorAgent",
  "agentResourceRoleArn": "arn:aws:iam::${AWS_ACCOUNT_ID}:role/AmazonBedrockExecutionRoleForAgents_orchestrator",
  "description": "Agente principale che coordina Task Manager e Daily Briefing agents",
  "idleSessionTTLInSeconds": 3600,
  "foundationModel": "anthropic.claude-3-sonnet-20240229-v1:0",
  "instruction": "Sei un assistente personale intelligente che aiuta l'utente a organizzare la sua settimana. Il tuo compito Ã¨ analizzare i messaggi dell'utente e delegare al sub-agente appropriato:\n\n1. Se l'utente descrive obiettivi o vuole creare task, invoca il Task Manager Agent\n2. Se l'utente chiede un briefing o informazioni sui suoi impegni, invoca il Daily Briefing Agent\n3. Per richieste generali, fornisci assistenza diretta\n\nSii conciso, amichevole e proattivo. Comunica in italiano.",
  "actionGroups": [
    {
      "actionGroupName": "TaskManagerInvoker",
      "description": "Invoca il Task Manager Agent per creare task da obiettivi",
      "actionGroupExecutor": {
        "lambda": "arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:InvokeTaskManager"
      },
      "apiSchema": {
        "payload": {
          "openapi": "3.0.0",
          "info": {
            "title": "Task Manager Invoker API",
            "version": "1.0.0"
          },
          "paths": {
            "/invoke-task-manager": {
              "post": {
                "description": "Invoca il Task Manager Agent con un obiettivo",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "objective": {
                            "type": "string",
                            "description": "L'obiettivo da trasformare in task"
                          },
                          "user_id": {
                            "type": "string",
                            "description": "ID dell'utente"
                          }
                        },
                        "required": ["objective", "user_id"]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Task creati con successo",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "tasks": {
                              "type": "array",
                              "items": {
                                "type": "object"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "actionGroupName": "DailyBriefingInvoker",
      "description": "Invoca il Daily Briefing Agent per riassunto giornaliero",
      "actionGroupExecutor": {
        "lambda": "arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:InvokeDailyBriefing"
      },
      "apiSchema": {
        "payload": {
          "openapi": "3.0.0",
          "info": {
            "title": "Daily Briefing Invoker API",
            "version": "1.0.0"
          },
          "paths": {
            "/invoke-daily-briefing": {
              "post": {
                "description": "Invoca il Daily Briefing Agent",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "user_id": {
                            "type": "string",
                            "description": "ID dell'utente"
                          },
                          "date_filter": {
                            "type": "string",
                            "enum": ["today", "tomorrow", "week"],
                            "description": "Filtro temporale per il briefing"
                          }
                        },
                        "required": ["user_id"]
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Briefing generato con successo"
                  }
                }
              }
            }
          }
        }
      }
    }
  ]
}
