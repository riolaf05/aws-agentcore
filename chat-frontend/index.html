<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="modal-styles.css">
</head>
<body>
    <!-- Sidebar Menu -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>üìã Menu</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-view="chat">
                <span class="nav-icon">üí¨</span>
                <span class="nav-text">Chat</span>
            </a>
            <a href="#" class="nav-item" data-view="goals">
                <span class="nav-icon">üéØ</span>
                <span class="nav-text">Obiettivi</span>
            </a>
            <a href="#" class="nav-item" data-view="projects">
                <span class="nav-icon">üíº</span>
                <span class="nav-text">Progetti</span>
            </a>
            <a href="#" class="nav-item" data-view="contacts">
                <span class="nav-icon">üë§</span>
                <span class="nav-text">Contatti</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Chat View -->
        <div id="chatView" class="view active">
            <div class="chat-container">
                <div class="chat-header">
                    <h1>ü§ñ Orchestrator AI</h1>
                    <div class="status">
                        <span id="status-indicator" class="status-dot disconnected"></span>
                        <span id="status-text">Disconnesso</span>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="system-message">
                        Benvenuto! Sono l'Orchestrator AI. Posso aiutarti a:
                        <ul>
                            <li>üìù Creare e gestire task</li>
                            <li>üéØ Gestire obiettivi strategici</li>
                            <li>üíº Organizzare progetti</li>
                            <li>üîç Cercare informazioni online</li>
                            <li>üßÆ Eseguire calcoli matematici</li>
                        </ul>
                        Scrivi un messaggio per iniziare!
                    </div>
                </div>

                <div class="chat-input-container">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Scrivi un messaggio..."
                        autocomplete="off"
                    >
                    <button id="sendButton">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </div>

                <div class="chat-info">
                    <small>Session ID: <span id="sessionId"></span></small>
                    <button id="newSessionButton" class="new-session-btn">Nuova Sessione</button>
                </div>
            </div>
        </div>

        <!-- Goals View -->
        <div id="goalsView" class="view">
            <div class="section-container">
                <div class="section-header">
                    <h1>üéØ Obiettivi Strategici</h1>
                    <button id="newGoalBtn" class="primary-btn">+ Nuovo Obiettivo</button>
                </div>

                <!-- Goals Form (hidden by default) -->
                <div id="goalForm" class="form-container" style="display: none;">
                    <h2>Crea Nuovo Obiettivo</h2>
                    <form id="createGoalForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="goalAmbito">Ambito *</label>
                                <input type="text" id="goalAmbito" placeholder="es. Reply, MatchGuru" required>
                            </div>
                            <div class="form-group">
                                <label for="goalPriorita">Priorit√† *</label>
                                <select id="goalPriorita" required>
                                    <option value="low">Bassa</option>
                                    <option value="medium" selected>Media</option>
                                    <option value="high">Alta</option>
                                    <option value="urgent">Urgente</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="goalTitolo">Titolo *</label>
                            <input type="text" id="goalTitolo" placeholder="es. Aumentare fatturato Q1" required>
                        </div>
                        <div class="form-group">
                            <label for="goalDescrizione">Descrizione</label>
                            <textarea id="goalDescrizione" rows="3" placeholder="Descrizione dettagliata dell'obiettivo..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="goalScadenza">Scadenza *</label>
                            <input type="date" id="goalScadenza" required>
                        </div>
                        <div class="form-group">
                            <label for="goalMetriche">Metriche (JSON)</label>
                            <textarea id="goalMetriche" rows="2" placeholder='{"completamento_percentuale": 0, "target": 100}'></textarea>
                            <small>Formato: {"chiave": valore, ...}</small>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="primary-btn">Salva Obiettivo</button>
                            <button type="button" id="cancelGoalBtn" class="secondary-btn">Annulla</button>
                        </div>
                    </form>
                </div>

                <!-- Goals Filters -->
                <div class="filters-container">
                    <input type="text" id="goalFilterAmbito" placeholder="Filtra per ambito...">
                    <select id="goalFilterStatus">
                        <option value="">Tutti gli stati</option>
                        <option value="active" selected>Attivi</option>
                        <option value="completed">Completati</option>
                        <option value="cancelled">Cancellati</option>
                    </select>
                    <select id="goalFilterPriorita">
                        <option value="">Tutte le priorit√†</option>
                        <option value="urgent">Urgente</option>
                        <option value="high">Alta</option>
                        <option value="medium">Media</option>
                        <option value="low">Bassa</option>
                    </select>
                    <button id="refreshGoalsBtn" class="secondary-btn">üîÑ Aggiorna</button>
                </div>

                <!-- Goals List -->
                <div id="goalsList" class="items-list">
                    <p class="loading">Caricamento obiettivi...</p>
                </div>
            </div>
        </div>

        <!-- Projects View -->
        <div id="projectsView" class="view">
            <div class="section-container">
                <div class="section-header">
                    <div>
                        <h1>üíº Progetti</h1>
                        <div class="counter-badge">
                            <span id="projectsCounter">0</span> progetti caricati
                        </div>
                    </div>
                    <button id="newProjectBtn" class="primary-btn">+ Nuovo Progetto</button>
                </div>

                <!-- Projects Form (hidden by default) -->
                <div id="projectForm" class="form-container" style="display: none;">
                    <h2>Crea Nuovo Progetto</h2>
                    <form id="createProjectForm">
                        <div class="form-group">
                            <label for="projectAmbito">Ambito *</label>
                            <input type="text" id="projectAmbito" placeholder="es. Reply, MatchGuru" required>
                        </div>
                        <div class="form-group">
                            <label for="projectTitolo">Titolo *</label>
                            <input type="text" id="projectTitolo" placeholder="es. Sistema Analytics Real-time" required>
                        </div>
                        <div class="form-group">
                            <label for="projectGithubUrl">GitHub URL</label>
                            <input type="url" id="projectGithubUrl" placeholder="https://github.com/user/repo">
                        </div>
                        <div class="form-group">
                            <label for="projectDescrizione">Descrizione</label>
                            <textarea id="projectDescrizione" rows="4" placeholder="Descrizione dettagliata del progetto..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="projectTag">Tecnologie/Tag</label>
                            <input type="text" id="projectTag" placeholder="Python, AWS, React (separati da virgola)">
                            <small>Inserisci le tecnologie separate da virgola</small>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="primary-btn">Salva Progetto</button>
                            <button type="button" id="cancelProjectBtn" class="secondary-btn">Annulla</button>
                        </div>
                    </form>
                </div>

                <!-- Projects Filters -->
                <div class="filters-container">
                    <input type="text" id="projectFilterAmbito" placeholder="Filtra per ambito...">
                    <input type="text" id="projectFilterTag" placeholder="Filtra per tecnologia...">
                    <button id="refreshProjectsBtn" class="secondary-btn">üîÑ Aggiorna</button>
                </div>

                <!-- Projects List -->
                <div id="projectsList" class="items-list">
                    <p class="loading">Caricamento progetti...</p>
                </div>
            </div>
        </div>

        <!-- Contacts View -->
        <div id="contactsView" class="view">
            <div class="section-container">
                <div class="section-header">
                    <div>
                        <h1>üë§ Contatti</h1>
                        <div class="counter-badge">
                            <span id="contactsCounter">0</span> contatti caricati
                        </div>
                    </div>
                    <button id="newContactBtn" class="primary-btn">+ Nuovo Contatto</button>
                </div>

                <!-- Contacts Form (hidden by default) -->
                <div id="contactForm" class="form-container" style="display: none;">
                    <h2>Crea Nuovo Contatto</h2>
                    <form id="createContactForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contactNome">Nome</label>
                                <input type="text" id="contactNome" placeholder="es. Mario">
                            </div>
                            <div class="form-group">
                                <label for="contactCognome">Cognome</label>
                                <input type="text" id="contactCognome" placeholder="es. Rossi">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contactEmail">Email</label>
                                <input type="email" id="contactEmail" placeholder="mario.rossi@example.com">
                            </div>
                            <div class="form-group">
                                <label for="contactTelefono">Telefono</label>
                                <input type="tel" id="contactTelefono" placeholder="+39 123 456 7890">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contactDescrizione">Descrizione</label>
                            <textarea id="contactDescrizione" rows="3" placeholder="Breve descrizione del contatto..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="contactDoveConosciuto">Dove Conosciuto</label>
                            <input type="text" id="contactDoveConosciuto" placeholder="es. Conferenza Tech, LinkedIn, Universit√†">
                        </div>
                        <div class="form-group">
                            <label for="contactNote">Note</label>
                            <textarea id="contactNote" rows="2" placeholder="Note aggiuntive..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="contactUrl">URL</label>
                            <input type="url" id="contactUrl" placeholder="https://linkedin.com/in/...">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="primary-btn">Salva Contatto</button>
                            <button type="button" id="cancelContactBtn" class="secondary-btn">Annulla</button>
                        </div>
                    </form>
                </div>

                <!-- Contacts Filters -->
                <div class="filters-container">
                    <input type="text" id="contactFilterNome" placeholder="Filtra per nome...">
                    <input type="text" id="contactFilterCognome" placeholder="Filtra per cognome...">
                    <input type="text" id="contactFilterDove" placeholder="Filtra per dove conosciuto...">
                    <select id="contactSortOrder" class="secondary-btn" style="min-width: 200px;">
                        <option value="date-desc">üìÖ Pi√π recenti</option>
                        <option value="date-asc">üìÖ Pi√π vecchi</option>
                        <option value="name-asc">üî§ Nome A-Z</option>
                        <option value="name-desc">üî§ Nome Z-A</option>
                    </select>
                    <button id="refreshContactsBtn" class="secondary-btn">üîÑ Aggiorna</button>
                </div>

                <!-- Contacts List -->
                <div id="contactsList" class="items-list">
                    <p class="loading">Caricamento contatti...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Goal Modal -->
    <div id="editGoalModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Modifica Obiettivo</h2>
                <button class="modal-close" onclick="closeEditGoalModal()">&times;</button>
            </div>
            <form id="editGoalForm" onsubmit="handleUpdateGoal(event)">
                <input type="hidden" id="editGoalId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editGoalAmbito">Ambito *</label>
                        <input type="text" id="editGoalAmbito" required>
                    </div>
                    <div class="form-group">
                        <label for="editGoalPriorita">Priorit√† *</label>
                        <select id="editGoalPriorita" required>
                            <option value="low">Bassa</option>
                            <option value="medium">Media</option>
                            <option value="high">Alta</option>
                            <option value="urgent">Urgente</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="editGoalTitolo">Titolo *</label>
                    <input type="text" id="editGoalTitolo" required>
                </div>
                <div class="form-group">
                    <label for="editGoalDescrizione">Descrizione</label>
                    <textarea id="editGoalDescrizione" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editGoalScadenza">Scadenza *</label>
                        <input type="date" id="editGoalScadenza" required>
                    </div>
                    <div class="form-group">
                        <label for="editGoalStatus">Stato *</label>
                        <select id="editGoalStatus" required>
                            <option value="active">Attivo</option>
                            <option value="completed">Completato</option>
                            <option value="cancelled">Cancellato</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="editGoalMetriche">Metriche (JSON)</label>
                    <textarea id="editGoalMetriche" rows="2"></textarea>
                    <small>Formato: {"chiave": valore, ...}</small>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">üíæ Salva Modifiche</button>
                    <button type="button" class="secondary-btn" onclick="closeEditGoalModal()">Annulla</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Project Modal -->
    <div id="editProjectModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Modifica Progetto</h2>
                <button class="modal-close" onclick="closeEditProjectModal()">&times;</button>
            </div>
            <form id="editProjectForm" onsubmit="handleUpdateProject(event)">
                <input type="hidden" id="editProjectId">
                <div class="form-group">
                    <label for="editProjectAmbito">Ambito *</label>
                    <input type="text" id="editProjectAmbito" required>
                </div>
                <div class="form-group">
                    <label for="editProjectTitolo">Titolo *</label>
                    <input type="text" id="editProjectTitolo" required>
                </div>
                <div class="form-group">
                    <label for="editProjectGithubUrl">GitHub URL</label>
                    <input type="url" id="editProjectGithubUrl">
                </div>
                <div class="form-group">
                    <label for="editProjectDescrizione">Descrizione</label>
                    <textarea id="editProjectDescrizione" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="editProjectTag">Tecnologie/Tag</label>
                    <input type="text" id="editProjectTag" placeholder="Python, AWS, React (separati da virgola)">
                    <small>Inserisci le tecnologie separate da virgola</small>
                </div>
                <div class="form-group">
                    <label for="editProjectStatus">Stato *</label>
                    <select id="editProjectStatus" required>
                        <option value="active">Attivo</option>
                        <option value="completed">Completato</option>
                        <option value="cancelled">Cancellato</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">üíæ Salva Modifiche</button>
                    <button type="button" class="secondary-btn" onclick="closeEditProjectModal()">Annulla</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Contact Modal -->
    <div id="editContactModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Modifica Contatto</h2>
                <button class="modal-close" onclick="closeEditContactModal()">&times;</button>
            </div>
            <form id="editContactForm" onsubmit="handleUpdateContact(event)">
                <input type="hidden" id="editContactId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editContactNome">Nome</label>
                        <input type="text" id="editContactNome">
                    </div>
                    <div class="form-group">
                        <label for="editContactCognome">Cognome</label>
                        <input type="text" id="editContactCognome">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editContactEmail">Email</label>
                        <input type="email" id="editContactEmail">
                    </div>
                    <div class="form-group">
                        <label for="editContactTelefono">Telefono</label>
                        <input type="tel" id="editContactTelefono">
                    </div>
                </div>
                <div class="form-group">
                    <label for="editContactDescrizione">Descrizione</label>
                    <textarea id="editContactDescrizione" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="editContactDoveConosciuto">Dove Conosciuto</label>
                    <input type="text" id="editContactDoveConosciuto">
                </div>
                <div class="form-group">
                    <label for="editContactNote">Note</label>
                    <textarea id="editContactNote" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="editContactUrl">URL</label>
                    <input type="url" id="editContactUrl">
                </div>
                <div class="form-actions">
                    <button type="submit" class="primary-btn">üíæ Salva Modifiche</button>
                    <button type="button" class="secondary-btn" onclick="closeEditContactModal()">Annulla</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
